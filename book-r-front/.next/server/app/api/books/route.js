"use strict";(()=>{var e={};e.id=8562,e.ids=[8562],e.modules={38013:e=>{e.exports=require("mongodb")},11185:e=>{e.exports=require("mongoose")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},72254:e=>{e.exports=require("node:buffer")},6005:e=>{e.exports=require("node:crypto")},47261:e=>{e.exports=require("node:util")},69690:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>y,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>x});var n={};t.r(n),t.d(n,{GET:()=>c});var o=t(49303),s=t(88716),i=t(60670),a=t(55285),p=t(16368),u=t(44830),d=t(87070);async function c(e){let r=await (0,u.I8)(),t=r?.user?.id;if("string"!=typeof t||!["6681baf3edaf2e8a771432a2"].includes(t))return d.NextResponse.json({message:"You are not authorized to view this page"});await (0,a.Z)();let{searchParams:n}=new URL(e.url),o=n.get("id");try{if(o){let e=await p.Z.findById(o);if(!e)return d.NextResponse.json({message:"Book not found"},{status:404});return d.NextResponse.json(e)}let e=await p.Z.find();return d.NextResponse.json(e)}catch(e){return console.error("GET request error:",e),new Response("Internal Server Error",{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/books/route",pathname:"/api/books",filename:"route",bundlePath:"app/api/books/route"},resolvedPagePath:"/Users/shashanklahoti/Desktop/Coding Projects/test2-Front/book-r-front/app/api/books/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:x,serverHooks:m}=l,y="/api/books/route";function v(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:x})}},44830:(e,r,t)=>{let n;t.d(r,{I8:()=>m,handlers:()=>l});var o=t(15138),s=t(8204),i=t(80092),a=t(64704),p=t(38013);if(!process.env.MONGODB_URI)throw Error('Invalid/Missing environment variable: "MONGODB_URI"');let u=process.env.MONGODB_URI,d={serverApi:{version:p.ServerApiVersion.v1,strict:!0,deprecationErrors:!0}};n=new p.MongoClient(u,d).connect();let c=["6681baf3edaf2e8a771432a2"],{handlers:l,signIn:g,signOut:x,auth:m}=(0,o.ZP)({providers:[s.Z,i.Z],adapter:(0,a.dJ)(n),pages:{signIn:"/auth/login",signOut:"/auth/logout"},callbacks:{jwt:async({token:e,account:r})=>(r&&(e.accessToken=r.access_token),e),session:async({session:e,token:r,user:t})=>c.includes(e?.user?.id)?{...e,isAdmin:!0}:{...e,isAdmin:!1}}})},55285:(e,r,t)=>{t.d(r,{Z:()=>s});var n=t(11185),o=t.n(n);function s(){if(1===o().connection.readyState)return o().connection.asPromise();{let e=process.env.MONGODB_URI;return o().connect(e)}}},16368:(e,r,t)=>{t.d(r,{Z:()=>i});var n=t(11185),o=t.n(n);let s=new n.Schema({title:{type:String,required:!0},author:{type:String,required:!0},year:{type:Number,required:!0},description:{type:String,required:!0},link:{type:String,required:!0},images:{type:[{type:String}]},sorting:{type:o().Types.ObjectId,ref:"Sorting"},properties:{type:Object},genre:{type:String}}),i=o().models.NewBook||o().model("NewBook",s)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[8948,5972,9066],()=>t(69690));module.exports=n})();