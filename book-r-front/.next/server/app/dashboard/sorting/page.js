(()=>{var e={};e.id=7984,e.ids=[7984],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},53846:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),t(2847),t(13321),t(44721),t(35866);var r=t(23191),a=t(88716),n=t(37922),l=t.n(n),i=t(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let d=["",{children:["dashboard",{children:["sorting",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2847)),"/Users/shashanklahoti/Desktop/Coding Projects/test2-Front/book-r-front/app/dashboard/sorting/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/shashanklahoti/Desktop/Coding Projects/test2-Front/book-r-front/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,44721)),"/Users/shashanklahoti/Desktop/Coding Projects/test2-Front/book-r-front/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/shashanklahoti/Desktop/Coding Projects/test2-Front/book-r-front/app/dashboard/sorting/page.tsx"],x="/dashboard/sorting/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/sorting/page",pathname:"/dashboard/sorting",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},721:(e,s,t)=>{Promise.resolve().then(t.bind(t,4810))},4810:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(10326),a=t(6305),n=t(90772),l=t(17577),i=t(44099),o=t(15940),d=t(34474),c=t(99440);function x({_id:e}){async function s(e){await i.Z.delete("/api/sorting",{data:{id:e}}),window.location.reload()}return(0,r.jsxs)(c.aR,{children:[r.jsx(c.vW,{asChild:!0,children:r.jsx("button",{className:"text-blue-600 hover:underline text-right m-4",children:"Delete"})}),(0,r.jsxs)(c._T,{children:[(0,r.jsxs)(c.fY,{children:[r.jsx(c.f$,{children:"Are you absolutely sure?"}),r.jsx(c.yT,{children:"This action cannot be undone. This will permanently delete the category and remove its data from our servers."})]}),(0,r.jsxs)(c.xo,{children:[r.jsx(c.le,{children:"Cancel"}),r.jsx(c.OL,{onClick:()=>s(e),children:"Continue"})]})]})]})}function u({_id:e}){async function s(e){await i.Z.delete("/api/genres",{data:{id:e}}),window.location.reload()}return(0,r.jsxs)(c.aR,{children:[r.jsx(c.vW,{asChild:!0,children:r.jsx("button",{className:"text-blue-600 hover:underline text-right m-4",children:"Delete"})}),(0,r.jsxs)(c._T,{children:[(0,r.jsxs)(c.fY,{children:[r.jsx(c.f$,{children:"Are you absolutely sure?"}),r.jsx(c.yT,{children:"This action cannot be undone. This will permanently delete the category and remove its data from our servers."})]}),(0,r.jsxs)(c.xo,{children:[r.jsx(c.le,{children:"Cancel"}),r.jsx(c.OL,{onClick:()=>s(e),children:"Continue"})]})]})]})}function m(){let[e,s]=(0,l.useState)([]),[t,a]=(0,l.useState)(""),[c,x]=(0,l.useState)("");async function m(){try{let e=await i.Z.get("/api/genres");s(e.data)}catch(e){console.error("Error fetching genres:",e)}}async function h(e){e.preventDefault();try{await i.Z.post("/api/genres",{name:t,parent:c}),m()}catch(e){console.error("Error submitting genre:",e)}}return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md mx-auto mt-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4 text-center",children:"Genre Form"}),(0,r.jsxs)("form",{onSubmit:h,children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 mb-2",children:"Name"}),r.jsx("input",{type:"text",placeholder:"Enter a Name",value:t,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 mb-2",children:"Parent"}),(0,r.jsxs)(d.Ph,{value:c,onValueChange:e=>x(e),children:[r.jsx(d.i4,{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500",children:r.jsx(d.ki,{placeholder:"Select a Parent (Optional)"})}),r.jsx(d.Bw,{children:(0,r.jsxs)(d.DI,{children:[r.jsx(d.n5,{children:"Parents"}),e.map(e=>r.jsx(d.Ql,{value:e.name,children:e.name},e._id))]})})]})]}),r.jsx(n.z,{type:"submit",className:"w-full bg-gray-600 text-white py-2 rounded-md hover:bg-gray-700",children:"Submit"})]})]}),r.jsx("div",{className:"mt-6 max-h-screen overflow-y-auto",children:(0,r.jsxs)(o.iA,{className:"shadow-md bg-white rounded-lg",children:[r.jsx(o.Rn,{className:"text-center text-gray-700 font-medium",children:"All current genres"}),r.jsx(o.xD,{children:(0,r.jsxs)(o.SC,{children:[r.jsx(o.ss,{className:"text-gray-700",children:"ID"}),r.jsx(o.ss,{className:"text-gray-700",children:"Name"}),r.jsx(o.ss,{className:"text-gray-700",children:"Parent"}),r.jsx(o.ss,{className:"text-gray-700",children:"Actions"})]})}),r.jsx(o.RM,{children:e.length>0&&e.map(e=>(0,r.jsxs)(o.SC,{children:[r.jsx(o.pj,{className:"text-gray-700",children:e._id}),r.jsx(o.pj,{className:"text-gray-700",children:e.name}),r.jsx(o.pj,{className:"text-gray-700",children:e.parent}),r.jsx(o.pj,{className:"text-gray-700 flex justify-end gap-2",children:r.jsx(u,{_id:e._id})})]},e._id))})]})})]})}function h(){let[e,s]=(0,l.useState)(""),[t,c]=(0,l.useState)([]),[u,h]=(0,l.useState)(""),[p,g]=(0,l.useState)(!1),[f,j]=(0,l.useState)(null),[y,b]=(0,l.useState)([]);function N(){i.Z.get("/api/sorting").then(e=>{c(e.data)}).catch(e=>{console.error("Error fetching data:",e)})}async function v(s){s.preventDefault();let r={name:e,parent:"0"===u?null:t.find(e=>e._id===u)||null,properties:y.map(e=>({name:e.name,value:e.value.split(",")}))};p&&f?(r._id=f._id,await i.Z.put("/api/sorting",r),g(!1),j(null),N(),w()):(await i.Z.post("/api/sorting",r),w(),N())}function w(){s(""),h(""),b([])}return r.jsx("div",{className:"bg-gray-50 min-h-screen flex flex-col items-center",children:r.jsx(a.Z,{children:(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx("div",{className:"max-w-1/2 mx-auto p-4 bg-white shadow-lg rounded-md mt-4 ml-4",children:(0,r.jsxs)("div",{className:"mt-4 w-full max-w-6xl px-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Sorting and Genre Management"}),r.jsx("div",{className:"flex flex-col gap-8 w-full",children:(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("form",{onSubmit:v,className:"bg-white p-6 rounded-lg shadow-lg w-full space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-gray-700 mb-1",children:"Sorting Class"}),r.jsx("input",{type:"text",placeholder:p?`Edit Sorting Name ${f?.name}`:"New Sorting Name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500",onChange:e=>s(e.target.value),value:e})]}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-gray-700 mb-1",children:"Parent"}),(0,r.jsxs)(d.Ph,{onValueChange:e=>h(e),value:u,children:[r.jsx(d.i4,{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500",children:r.jsx(d.ki,{placeholder:"Select a Parent"})}),r.jsx(d.Bw,{children:(0,r.jsxs)(d.DI,{children:[r.jsx(d.n5,{children:"Parent Classes"}),r.jsx(d.Ql,{value:"0",children:"No Parent"}),t.length>0&&t.map(e=>r.jsx(d.Ql,{value:e._id,children:e.name},e._id))]})})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-gray-700 mb-1",children:"Properties"}),y.length>0&&y.map((e,s)=>(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[r.jsx("input",{type:"text",placeholder:"Property Name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500",value:e.name,onChange:e=>{var t;return t=e.target.value,void b(e=>{let r=[...e];return r[s]={...r[s],name:t},r})}}),r.jsx("input",{type:"text",placeholder:"Property Value",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500",value:e.value,onChange:e=>{var t;return t=e.target.value,void b(e=>{let r=[...e];return r[s]={...r[s],value:t},r})}}),r.jsx(n.z,{type:"button",className:"bg-gray-700 text-white px-4 py-2 rounded-md hover:bg-gray-800",onClick:()=>{b(e=>{let t=[...e];return t.splice(s,1),t})},children:"Remove"})]},s))]}),(0,r.jsxs)("div",{className:"flex justify-between mt-4",children:[r.jsx(n.z,{type:"button",className:"bg-gray-700 text-white px-4 py-2 rounded-md hover:bg-gray-800",onClick:function(){b(e=>[...e,{name:"",value:""}])},children:"Add New Properties"}),(0,r.jsxs)("div",{children:[r.jsx(n.z,{type:"submit",className:"bg-gray-700 text-white px-4 py-2 rounded-md hover:bg-gray-800 mr-2",children:"Save"}),p&&r.jsx(n.z,{type:"button",className:"bg-gray-700 text-white px-4 py-2 rounded-md hover:bg-gray-800",onClick:function(){g(!1),j(null),w()},children:"Cancel"})]})]})]}),!p&&r.jsx("div",{className:"mt-6 max-h-screen overflow-y-auto",children:(0,r.jsxs)(o.iA,{className:"shadow-md bg-white rounded-lg",children:[r.jsx(o.Rn,{className:"text-center text-gray-700 font-medium",children:"All current categories"}),r.jsx(o.xD,{children:(0,r.jsxs)(o.SC,{children:[r.jsx(o.ss,{className:"text-gray-700",children:"ID"}),r.jsx(o.ss,{className:"text-gray-700",children:"Name"}),r.jsx(o.ss,{className:"text-gray-700",children:"Version"}),r.jsx(o.ss,{className:"text-gray-700",children:"Parent"}),r.jsx(o.ss,{className:"text-gray-700",children:"Actions"})]})}),r.jsx(o.RM,{children:t.length>0&&t.map(e=>(0,r.jsxs)(o.SC,{children:[r.jsx(o.pj,{className:"text-gray-700",children:e._id}),r.jsx(o.pj,{className:"text-gray-700",children:e.name}),r.jsx(o.pj,{className:"text-gray-700",children:e.__v}),r.jsx(o.pj,{className:"text-gray-700",children:e?.parent?.name}),(0,r.jsxs)(o.pj,{className:"text-gray-700 flex justify-end gap-2",children:[r.jsx(x,{_id:e._id}),r.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>{g(!0),j(e),s(e.name),h(e.parent?e.parent._id:"0"),b(e.properties.map(({name:e,value:s})=>({name:e,value:s.join(",")})))},children:"Edit"})]})]},e._id))})]})})]})})]})}),r.jsx("div",{className:"max-w-1/2 mx-auto p-4 bg-white shadow-lg rounded-md mt-4",children:r.jsx(m,{})})]})})})}},34474:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>g,DI:()=>x,Ph:()=>c,Ql:()=>j,i4:()=>m,ki:()=>u,n5:()=>f});var r=t(10326),a=t(17577),n=t(66755),l=t(941),i=t(96633),o=t(32933),d=t(77863);let c=n.fC,x=n.ZA,u=n.B4,m=a.forwardRef(({className:e,children:s,...t},a)=>(0,r.jsxs)(n.xz,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,r.jsx(n.JO,{asChild:!0,children:r.jsx(l.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=n.xz.displayName;let h=a.forwardRef(({className:e,...s},t)=>r.jsx(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:r.jsx(i.Z,{className:"h-4 w-4"})}));h.displayName=n.u_.displayName;let p=a.forwardRef(({className:e,...s},t)=>r.jsx(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:r.jsx(l.Z,{className:"h-4 w-4"})}));p.displayName=n.$G.displayName;let g=a.forwardRef(({className:e,children:s,position:t="popper",...a},l)=>r.jsx(n.h_,{children:(0,r.jsxs)(n.VY,{ref:l,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...a,children:[r.jsx(h,{}),r.jsx(n.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),r.jsx(p,{})]})}));g.displayName=n.VY.displayName;let f=a.forwardRef(({className:e,...s},t)=>r.jsx(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s}));f.displayName=n.__.displayName;let j=a.forwardRef(({className:e,children:s,...t},a)=>(0,r.jsxs)(n.ck,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(n.wU,{children:r.jsx(o.Z,{className:"h-4 w-4"})})}),r.jsx(n.eT,{children:s})]}));j.displayName=n.ck.displayName,a.forwardRef(({className:e,...s},t)=>r.jsx(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=n.Z0.displayName},2847:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var r=t(68570);let a=(0,r.createProxy)(String.raw`/Users/shashanklahoti/Desktop/Coding Projects/test2-Front/book-r-front/app/dashboard/sorting/page.tsx`),{__esModule:n,$$typeof:l}=a;a.default;let i=(0,r.createProxy)(String.raw`/Users/shashanklahoti/Desktop/Coding Projects/test2-Front/book-r-front/app/dashboard/sorting/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,5629,6621,5730,434,4099,6536,6925,8338,370],()=>t(53846));module.exports=r})();