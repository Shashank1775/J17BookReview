(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{8081:function(e,r,t){Promise.resolve().then(t.bind(t,2230))},2230:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return h}});var s=t(7437),a=t(1367),n=t(495),l=t(8472),i=t(2265),o=t(6463),d=t(6294),c=t(6648);function u(e){let{_id:r,title:t,author:a,year:u="",description:h="",cover:f="",link:x="",images:m=[],sorting:p=null,properties:g={},genre:j=""}=e,[b,w]=(0,i.useState)(t),[v,y]=(0,i.useState)(a),[N,k]=(0,i.useState)(u),[S,Z]=(0,i.useState)(j),[L,A]=(0,i.useState)(h),[_,E]=(0,i.useState)(f),[C,B]=(0,i.useState)(x),[R,V]=(0,i.useState)(m),[z,I]=(0,i.useState)(p),[P,W]=(0,i.useState)(g),[D,G]=(0,i.useState)(!1),[M,O]=(0,i.useState)([]),[U,F]=(0,i.useState)([]),[H,Q]=(0,i.useState)(j),T=(0,o.useRouter)();async function Y(e){e.preventDefault();let t={title:b,author:v,year:N,description:L,link:C,images:R,sorting:z,properties:P,genre:H};try{r?await l.Z.put("/api/newbook/".concat(r),t):await l.Z.post("/api/newbook",t),G(!0)}catch(e){console.error("Error submitting book:",e)}}async function $(e){let r=e.target.files;if(r&&r.length>0){let e=new FormData;for(let t=0;t<r.length;t++)e.append("images",r[t]);try{let{data:r}=await l.Z.post("/api/upload",e);V(e=>[...e,r.imageUrl])}catch(e){console.error("Error uploading images:",e)}}}return(0,i.useEffect)(()=>{l.Z.get("/api/sorting").then(e=>{O(e.data)}).catch(e=>{console.error("Error fetching sorting data:",e)}),l.Z.get("/api/genres").then(e=>{F(e.data)}).catch(e=>{console.error("Error fetching genres data:",e)})},[]),D&&T.push("/dashboard/books"),(0,i.useEffect)(()=>{if(M.length>0&&z){let e=M.find(e=>e._id===z);if(e){let r=e.properties;W(e=>{let t={...e};return r.forEach(e=>{t[e.name]||(t[e.name]="")}),t})}}},[M,z]),(0,s.jsx)("div",{className:"bg-red-50 min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-full max-w-2xl p-6 rounded-lg shadow-md bg-white",children:(0,s.jsxs)("form",{onSubmit:Y,className:"space-y-4",children:[(0,s.jsx)("h1",{className:"text-gray-700 text-2xl font-bold mb-4",children:"Edit Book"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700",children:"Title"}),(0,s.jsx)("input",{type:"text",placeholder:"Title",value:b,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700",children:"Upload Images"}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsxs)("label",{className:"cursor-pointer w-24 h-24 flex items-center justify-center flex-col mt-1 bg-gray-700 rounded-lg text-white hover:bg-gray-900",children:[(0,s.jsx)("b",{children:"Upload"}),(0,s.jsx)("input",{type:"file",className:"w-full h-full hidden",onChange:$}),(0,s.jsx)("b",{children:"Images"})]}),(0,s.jsx)("div",{children:R.length>0&&R.map((e,r)=>(0,s.jsx)("div",{className:"my-2 h-24 w-24 inline-block",children:(0,s.jsx)(c.default,{src:e,alt:"Image ".concat(r),className:"max-height-100% rounded-lg"})},r))})]})]}),P&&Object.keys(P).length>0&&Object.keys(P).map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-1/2",children:(0,s.jsx)("div",{children:e})}),(0,s.jsx)("div",{className:"w-1/2",children:(0,s.jsxs)(d.Ph,{value:P[e]||"",onValueChange:r=>W(t=>({...t,[e]:r})),children:[(0,s.jsx)(d.i4,{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500",children:(0,s.jsx)(d.ki,{placeholder:"Select a Value"})}),(0,s.jsx)(d.Bw,{children:(0,s.jsxs)(d.DI,{children:[(0,s.jsxs)(d.n5,{children:[e," Values"]}),Array.isArray(P[e])&&P[e].map((e,r)=>(0,s.jsx)(d.Ql,{value:e,children:e},r))]})})]})})]},r)),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700",children:"Genre"}),(0,s.jsxs)(d.Ph,{value:H,onValueChange:e=>Q(e),children:[(0,s.jsx)(d.i4,{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500",children:(0,s.jsx)(d.ki,{placeholder:"Select a Genre"})}),(0,s.jsx)(d.Bw,{children:(0,s.jsxs)(d.DI,{children:[(0,s.jsx)(d.n5,{children:"Genres"}),U.map(e=>(0,s.jsx)(d.Ql,{value:e.name,children:e.name},e._id))]})})]})]}),(0,s.jsx)(n.z,{type:"submit",className:"bg-gray-700 text-white w-full px-4 py-2 rounded-md hover:bg-gray-800",children:"Submit"})]})})})}function h(e){let{params:r}=e,t=r.slug[0],[n,d]=(0,i.useState)(null),[c,h]=(0,i.useState)(!0),[f,x]=(0,i.useState)(null);return((0,o.useRouter)(),(0,i.useEffect)(()=>{(async()=>{try{let e=await l.Z.get("/api/newbook?id=".concat(t));d(e.data),h(!1)}catch(e){console.error("Error fetching book data:",e),x("Failed to fetch book data"),h(!1)}})()},[t]),c)?(0,s.jsx)(a.Z,{children:(0,s.jsx)("div",{children:"Loading..."})}):f?(0,s.jsx)(a.Z,{children:(0,s.jsxs)("div",{children:["Error: ",f]})}):(0,s.jsx)(a.Z,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Edit Form"}),(0,s.jsx)("h1",{children:t}),n&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{children:(0,s.jsx)(u,{...n})})})]})})}},1367:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var s=t(7437),a=t(9114);function n(e){let{children:r}=e;return(0,s.jsxs)("div",{className:"bg-red-50 w-screen h-screen text-black flex",children:[(0,s.jsx)(a.default,{}),(0,s.jsx)("div",{className:"ml-4 p-4",children:r})]})}t(2265)},9114:function(e,r,t){"use strict";t.d(r,{default:function(){return o}});var s=t(7437),a=t(7138),n=t(6463),l=t(495),i=t(8174);function o(){let e="flex gap-1 text-gray-700 p-1 hover:bg-gray-600 hover:text-white rounded-md",r="flex gap-1 bg-gray-800 rounded-md p-1",t=(0,n.useRouter)(),o=(0,n.usePathname)(),d=async()=>{try{await (0,i.w7)({callbackUrl:"/dashboard/admin"})}catch(e){console.error(e)}},{data:c,status:u}=(0,i.kP)();return"unauthenticated"===u?(t.push("/auth/login"),null):(0,s.jsx)("div",{children:(0,s.jsxs)("aside",{className:"text-white p-4 text-gray-700 bg-red-100",children:[(0,s.jsxs)(a.default,{href:"/",className:"flex mb-3",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),(0,s.jsx)("span",{children:"Book Admin"})]}),(0,s.jsxs)("nav",{className:"flex flex-col gap-2",children:[(0,s.jsxs)(a.default,{href:"/dashboard/books",className:o.includes("/dashboard/books")?r:e,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9"})}),"Books"]}),(0,s.jsxs)(a.default,{href:"/dashboard/sorting",className:o.includes("/dashboard/sorting")?r:e,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),"Sorting"]}),(0,s.jsxs)(a.default,{href:"/dashboard/search",className:o.includes("/dashboard/search")?r:e,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),"Search"]}),(0,s.jsxs)(a.default,{href:"/dashboard/settings",className:o.includes("/dashboard/settings")?r:e,children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),"Settings"]}),(0,s.jsx)(l.z,{onClick:d,children:"Sign out"})]})]})})}},495:function(e,r,t){"use strict";t.d(r,{d:function(){return o},z:function(){return d}});var s=t(7437),a=t(2265),n=t(1538),l=t(2218),i=t(7440);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(o({variant:a,size:l,className:t})),ref:r,...c})});d.displayName="Button"},6294:function(e,r,t){"use strict";t.d(r,{Bw:function(){return p},DI:function(){return u},Ph:function(){return c},Ql:function(){return j},i4:function(){return f},ki:function(){return h},n5:function(){return g}});var s=t(7437),a=t(2265),n=t(9902),l=t(2421),i=t(4392),o=t(2468),d=t(7440);let c=n.fC,u=n.ZA,h=n.B4,f=a.forwardRef((e,r)=>{let{className:t,children:a,...i}=e;return(0,s.jsxs)(n.xz,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[a,(0,s.jsx)(n.JO,{asChild:!0,children:(0,s.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=n.xz.displayName;let x=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.u_,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=n.u_.displayName;let m=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.$G,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})});m.displayName=n.$G.displayName;let p=a.forwardRef((e,r)=>{let{className:t,children:a,position:l="popper",...i}=e;return(0,s.jsx)(n.h_,{children:(0,s.jsxs)(n.VY,{ref:r,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...i,children:[(0,s.jsx)(x,{}),(0,s.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(m,{})]})})});p.displayName=n.VY.displayName;let g=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.__,{ref:r,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})});g.displayName=n.__.displayName;let j=a.forwardRef((e,r)=>{let{className:t,children:a,...l}=e;return(0,s.jsxs)(n.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(n.eT,{children:a})]})});j.displayName=n.ck.displayName,a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.Z0,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=n.Z0.displayName},7440:function(e,r,t){"use strict";t.d(r,{cn:function(){return n}});var s=t(4839),a=t(6164);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,s.W)(r))}}},function(e){e.O(0,[174,183,138,472,464,361,595,971,23,744],function(){return e(e.s=8081)}),_N_E=e.O()}]);