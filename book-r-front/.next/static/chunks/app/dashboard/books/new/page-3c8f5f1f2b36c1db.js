(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{9292:function(e,r,a){Promise.resolve().then(a.bind(a,9114)),Promise.resolve().then(a.bind(a,8156))},9114:function(e,r,a){"use strict";a.d(r,{default:function(){return d}});var t=a(7437),s=a(7138),n=a(6463),l=a(495),o=a(8174);function d(){let e="flex gap-1 text-gray-700 p-1 hover:bg-gray-600 hover:text-white rounded-md",r="flex gap-1 bg-gray-800 rounded-md p-1",a=(0,n.useRouter)(),d=(0,n.usePathname)(),i=async()=>{try{await (0,o.w7)({callbackUrl:"/dashboard/admin"})}catch(e){console.error(e)}},{data:c,status:u}=(0,o.kP)();return"unauthenticated"===u?(a.push("/auth/login"),null):(0,t.jsx)("div",{children:(0,t.jsxs)("aside",{className:"text-white p-4 text-gray-700 bg-red-100",children:[(0,t.jsxs)(s.default,{href:"/",className:"flex mb-3",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),(0,t.jsx)("span",{children:"Book Admin"})]}),(0,t.jsxs)("nav",{className:"flex flex-col gap-2",children:[(0,t.jsxs)(s.default,{href:"/dashboard/books",className:d.includes("/dashboard/books")?r:e,children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9"})}),"Books"]}),(0,t.jsxs)(s.default,{href:"/dashboard/sorting",className:d.includes("/dashboard/sorting")?r:e,children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),"Sorting"]}),(0,t.jsxs)(s.default,{href:"/dashboard/search",className:d.includes("/dashboard/search")?r:e,children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),"Search"]}),(0,t.jsxs)(s.default,{href:"/dashboard/settings",className:d.includes("/dashboard/settings")?r:e,children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),"Settings"]}),(0,t.jsx)(l.z,{onClick:i,children:"Sign out"})]})]})})}},8156:function(e,r,a){"use strict";a.d(r,{default:function(){return c}});var t=a(7437),s=a(495),n=a(8472),l=a(2265),o=a(6463),d=a(6294),i=a(6648);function c(){let[e,r]=(0,l.useState)(""),[a,c]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[f,m]=(0,l.useState)(""),[x,p]=(0,l.useState)(""),[g,b]=(0,l.useState)([]),[j,v]=(0,l.useState)(null),[y,w]=(0,l.useState)({}),[N,k]=(0,l.useState)(!1),[S,C]=(0,l.useState)([]),[_,L]=(0,l.useState)([]),[A,Z]=(0,l.useState)(""),B=(0,o.useRouter)();async function V(r){r.preventDefault();let t={title:e,author:a,year:u,description:f,link:x,images:g,sorting:j,properties:y,cGenre:A};"0"===t.sorting&&delete t.sorting;try{await n.Z.post("/api/newbook",t),k(!0)}catch(e){console.error("Error submitting data:",e)}}async function z(e){var r;let a=null===(r=e.target)||void 0===r?void 0:r.files;if(a&&a.length>0){let e=new FormData;for(let r=0;r<a.length;r++)e.append("images",a[r]);try{let{data:r}=await n.Z.post("/api/upload",e);b(e=>[...e,r.imageUrl])}catch(e){console.error("Error uploading images:",e)}}}(0,l.useEffect)(()=>{n.Z.get("/api/sorting").then(e=>{C(e.data)}).catch(e=>{console.error("Error fetching data:",e)}),n.Z.get("/api/genres").then(e=>{L(e.data)}).catch(e=>{console.error("Error fetching data:",e)})},[]),N&&B.push("/dashboard/books");let R=[];if(S.length>0&&j){let e=S.find(e=>e._id===j);for(;e&&void 0!==e;)e.properties&&R.push(...e.properties),e=e.parent?S.find(r=>r._id===(null==e?void 0:e.parent._id)):void 0}return(0,t.jsx)("div",{className:"bg-red-50 min-h-screen flex items-center justify-center w-screen",children:(0,t.jsx)("div",{className:"w-full max-w-2xl p-6 rounded-lg shadow-md bg-white",children:(0,t.jsxs)("form",{onSubmit:V,className:"space-y-4",children:[(0,t.jsx)("h1",{className:"text-gray-700 text-2xl font-bold mb-4",children:"New Book"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Title"}),(0,t.jsx)("input",{type:"text",placeholder:"title",value:e,onChange:e=>r(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Author"}),(0,t.jsx)("input",{type:"text",placeholder:"author",value:a,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Year"}),(0,t.jsx)("input",{type:"number",placeholder:"year",value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Description"}),(0,t.jsx)("textarea",{placeholder:"description",value:f,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Upload Images"}),(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,t.jsxs)("label",{className:"cursor-pointer w-24 h-24 flex items-center justify-center flex-col mt-1 bg-gray-700 rounded-lg text-white hover:bg-gray-900",children:[(0,t.jsx)("b",{children:"Upload"}),(0,t.jsx)("input",{type:"file",className:"w-full h-full hidden",onChange:z}),(0,t.jsx)("b",{children:"Images"})]}),(0,t.jsx)("div",{children:!!g.length&&g.map((e,r)=>(0,t.jsx)("div",{className:"my-2 h-24 w-24 inline-block",children:(0,t.jsx)(i.default,{src:e,alt:"Image ".concat(r),className:"max-height-100% rounded-lg"})},r))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Link"}),(0,t.jsx)("input",{type:"text",placeholder:"link",value:x,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500"})]}),R.length>0&&R.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-1/2",children:(0,t.jsx)("div",{children:e.name})}),(0,t.jsx)("div",{className:"w-1/2",children:(0,t.jsxs)(d.Ph,{value:y[e.name],onValueChange:r=>{var a;return a=e.name,void w(e=>{let t={...e};return t[a]=r,t})},children:[(0,t.jsx)(d.i4,{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500",children:(0,t.jsx)(d.ki,{placeholder:"Select a Value"})}),(0,t.jsx)(d.Bw,{children:(0,t.jsxs)(d.DI,{children:[(0,t.jsxs)(d.n5,{children:[e.name," Values"]}),e.value.map((e,r)=>(0,t.jsx)(d.Ql,{value:e,children:e},r))]})})]})})]},r)),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Genre"}),(0,t.jsxs)(d.Ph,{value:A,onValueChange:e=>Z(e),children:[(0,t.jsx)(d.i4,{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-gray-500",children:(0,t.jsx)(d.ki,{placeholder:"Select a Value"})}),(0,t.jsx)(d.Bw,{children:(0,t.jsxs)(d.DI,{children:[(0,t.jsx)(d.n5,{children:"Genres"}),_.length>0&&_.map(e=>(0,t.jsx)(d.Ql,{value:e.name,children:e.name},e._id))]})})]})]}),(0,t.jsx)(s.z,{type:"submit",className:"bg-gray-700 text-white w-full px-4 py-2 rounded-md hover:bg-gray-800",children:"Submit"})]})})})}},495:function(e,r,a){"use strict";a.d(r,{d:function(){return d},z:function(){return i}});var t=a(7437),s=a(2265),n=a(1538),l=a(2218),o=a(7440);let d=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,r)=>{let{className:a,variant:s,size:l,asChild:i=!1,...c}=e,u=i?n.g7:"button";return(0,t.jsx)(u,{className:(0,o.cn)(d({variant:s,size:l,className:a})),ref:r,...c})});i.displayName="Button"},6294:function(e,r,a){"use strict";a.d(r,{Bw:function(){return p},DI:function(){return u},Ph:function(){return c},Ql:function(){return b},i4:function(){return f},ki:function(){return h},n5:function(){return g}});var t=a(7437),s=a(2265),n=a(9902),l=a(2421),o=a(4392),d=a(2468),i=a(7440);let c=n.fC,u=n.ZA,h=n.B4,f=s.forwardRef((e,r)=>{let{className:a,children:s,...o}=e;return(0,t.jsxs)(n.xz,{ref:r,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[s,(0,t.jsx)(n.JO,{asChild:!0,children:(0,t.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=n.xz.displayName;let m=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(n.u_,{ref:r,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,t.jsx)(o.Z,{className:"h-4 w-4"})})});m.displayName=n.u_.displayName;let x=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(n.$G,{ref:r,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,t.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let p=s.forwardRef((e,r)=>{let{className:a,children:s,position:l="popper",...o}=e;return(0,t.jsx)(n.h_,{children:(0,t.jsxs)(n.VY,{ref:r,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...o,children:[(0,t.jsx)(m,{}),(0,t.jsx)(n.l_,{className:(0,i.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,t.jsx)(x,{})]})})});p.displayName=n.VY.displayName;let g=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(n.__,{ref:r,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})});g.displayName=n.__.displayName;let b=s.forwardRef((e,r)=>{let{className:a,children:s,...l}=e;return(0,t.jsxs)(n.ck,{ref:r,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(n.wU,{children:(0,t.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(n.eT,{children:s})]})});b.displayName=n.ck.displayName,s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(n.Z0,{ref:r,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=n.Z0.displayName},7440:function(e,r,a){"use strict";a.d(r,{cn:function(){return n}});var t=a(4839),s=a(6164);function n(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.m6)((0,t.W)(r))}}},function(e){e.O(0,[174,183,138,472,464,361,595,971,23,744],function(){return e(e.s=9292)}),_N_E=e.O()}]);